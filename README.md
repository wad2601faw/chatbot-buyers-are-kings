# Buyers are KINGs - Enhanced Chatbot with Interactive Menu

## Overview
An interactive chat-based food ordering application where users can browse products, view images, and add items to cart by clicking menu cards.

## Setup Instructions

### 1. Database Setup
Run the SQL script to create/update database tables:
```
Import: config/database_setup.sql into MySQL
Database: buyers_are_kings
```

**Tables created:**
- `sellers` - Store seller information
- `products` - Product catalog with image paths
- `chats` - Chat history (optional)

### 2. Project Structure
```
chatbot1/
‚îú‚îÄ‚îÄ config/
‚îÇ   ‚îú‚îÄ‚îÄ koneksi.php          (Database connection)
‚îÇ   ‚îî‚îÄ‚îÄ database_setup.sql   (DB schema + sample data)
‚îú‚îÄ‚îÄ api/
‚îÇ   ‚îî‚îÄ‚îÄ chat.php             (Main chatbot logic + product card generation)
‚îú‚îÄ‚îÄ assets/
‚îÇ   ‚îú‚îÄ‚îÄ css/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ style.css        (UI styling for cards & badges)
‚îÇ   ‚îî‚îÄ‚îÄ js/
‚îÇ       ‚îî‚îÄ‚îÄ chat.js          (Cart management & click handlers)
‚îú‚îÄ‚îÄ images/                  (Product images directory)
‚îî‚îÄ‚îÄ index.php                (Main chat interface)
```

## How It Works

### User Interaction Flow

**Step 1: User sends message**
```
User: "nasi murah" ‚Üí Chat input
```

**Step 2: PHP processes request**
- `chat.php` receives message
- Analyzes keywords (rice, sweet, drink, snack, etc.)
- Queries database for cheapest products
- Returns product cards with HTML structure

**Step 3: JavaScript receives response**
- Chat message displays
- JavaScript automatically attaches click handlers to product cards
- Each product card now clickable

**Step 4: User clicks product**
- Clicks anywhere on product card
- JavaScript increments quantity in cart state
- Quantity badge updates with animation
- Cart object updated: `cart = { "3": 2, "5": 1, ... }`

**Step 5: Visual feedback**
- Red quantity badge appears at top-right of card
- Badge pulses with zoom animation
- Hover effect shows product is interactive
- Border highlights on card

---

## Technical Details

### Cart State (JavaScript)
```javascript
const cart = {
    "3": 2,      // Product ID 3, Quantity 2
    "5": 1,      // Product ID 5, Quantity 1
    "7": 3       // Product ID 7, Quantity 3
};
```

### Product Card HTML Structure
Generated by `generateProductCard()` in `chat.php`:
```html
<div class="product-card" 
     data-product-id="3" 
     data-product-name="Nasi Uduk"
     data-price="20000"
     data-qty="0">
    
    <img src="images/nasi_uduk.jpg" class="product-img">
    
    <div class="product-info">
        <div class="product-name">Nasi Uduk</div>
        <div class="product-seller">dari Warung Mak Siti</div>
        <div class="product-price">Rp 20000</div>
    </div>
    
    <div class="product-quantity-badge">0</div>
</div>
```

### Click Handler Logic
```javascript
function handleProductCardClick(e) {
    const productId = this.getAttribute("data-product-id");
    
    // Initialize if not in cart
    if (!cart[productId]) cart[productId] = 0;
    
    // Increment quantity
    cart[productId]++;
    
    // Update UI
    this.setAttribute("data-qty", cart[productId]);
    const badge = this.querySelector(".product-quantity-badge");
    badge.textContent = cart[productId];
    
    // Add pulse animation
    this.classList.add("qty-updated");
}
```

### Image Loading
- Products have `image` column in database
- Image path example: `images/nasi_uduk.jpg`
- If image missing: fallback to `images/default.jpg`
- Image fails to load: `onerror` attribute handles gracefully

### CSS Animations
- **Hover effect**: Card lifts up (-2px) with enhanced shadow
- **Click effect**: Border color changes, background tints blue
- **Badge animation**: Pulse zoom effect (0 ‚Üí 1.15 ‚Üí 1) in 0.5s
- **Card animation**: Smooth transitions on all properties

---

## Features Implemented

‚úÖ **Interactive Product Cards**
- Clickable menu items
- Smooth hover animations
- Visual feedback on click

‚úÖ **Quantity Tracking**
- Click to increment quantity
- Quantity badge shows current amount
- Cart state stored in memory

‚úÖ **Product Images**
- Database column for image paths
- Graceful fallback to default image
- Responsive image sizing (80x80px)

‚úÖ **Buyer-Friendly UI**
- Real food ordering app appearance
- Shopee-like interaction pattern
- Emoji indicators (üëë, üí∞)
- Clean, modern design

‚úÖ **Code Organization**
- PHP handles data & HTML generation
- JavaScript manages interactions
- CSS handles all styling
- Comments explain each section

---

## Example Product Data

```sql
INSERT INTO products VALUES
(1, 1, 'Nasi Goreng', 'rice', 25000, 'images/nasi_goreng.jpg'),
(2, 2, 'Nasi Kuning', 'rice', 22000, 'images/nasi_kuning.jpg'),
(3, 3, 'Nasi Uduk', 'rice', 20000, 'images/nasi_uduk.jpg'),
(4, 1, 'Martabak Coklat', 'sweet', 15000, 'images/martabak.jpg'),
-- ... more products
```

---

## How Images Are Displayed

### From Database to Browser

**1. PHP Query** (chat.php)
```php
SELECT p.id, p.product_name, s.seller_name, p.price, p.image
FROM products p
JOIN sellers s ON p.seller_id = s.id
```

**2. Generate HTML** (chat.php)
```php
<img src="images/nasi_uduk.jpg" alt="Nasi Uduk" class="product-img">
```

**3. Render on Page**
- Image loads from `/images/` directory
- CSS sizes it to 80x80px with border-radius
- If file not found: `onerror="this.src='images/default.jpg'"`

---

## User Experience Improvements

### Before (Text-only)
```
- Warung Mak Siti : Nasi Goreng (Rp 25000)
- Kedai Putra : Nasi Kuning (Rp 22000)
- Toko Manis Bunda : Nasi Uduk (Rp 20000)
```

### After (Interactive Cards with Images)
```
[Image] Nasi Goreng
        dari Warung Mak Siti
        Rp 25000
        
[Image] Nasi Kuning           [1]  ‚Üê Quantity badge
        dari Kedai Putra
        Rp 22000
        
[Image] Nasi Uduk             [2]  ‚Üê Quantity badge
        dari Toko Manis Bunda
        Rp 20000
```
- Cards are **clickable** ‚Üí increases quantity
- **Images** make browsing more visual
- **Badges** show what's in cart
- **Animations** provide feedback
- **Hover effects** show interactivity

---

## Keyword Mapping

| User Input | Category | DB Query |
|-----------|----------|----------|
| "nasi" | rice | WHERE category = 'rice' |
| "manis" | sweet | WHERE category = 'sweet' |
| "minum" | drink | WHERE category = 'drink' |
| "snack" | snack | WHERE category = 'snack' |
| "murah" | all | ORDER BY price ASC |

---

## Important Notes

‚ö†Ô∏è **Cart State**
- Stored in JavaScript memory only (not persistent)
- Resets on page refresh
- Ready to be extended with localStorage or backend storage

‚ö†Ô∏è **Image Paths**
- Relative paths: `images/product_name.jpg`
- Place actual images in `/images/` folder
- Use web-safe formats: JPG, PNG, WebP

‚ö†Ô∏è **Database**
- Run `database_setup.sql` first to create tables
- Sample data included (12 products)
- Modify `chat.php` to handle new categories

---

## Future Enhancements (Optional)

- Save cart to localStorage
- Checkout page with order summary
- Remove/decrease quantity buttons
- Search/filter products
- Order history
- User authentication
- Payment integration

---

## Testing

### Test Scenario 1: Basic Chat
```
User: "halo"
Expected: Greeting message with instructions
```

### Test Scenario 2: Browse Products
```
User: "nasi murah"
Expected: 3 product cards displayed with images, clickable
```

### Test Scenario 3: Add to Cart
```
User: Click on product card
Expected: Quantity badge appears, increments on each click
```

### Test Scenario 4: Multiple Selections
```
User: Click product 1 (√ó2), Click product 2 (√ó1)
Expected: Cart = {"1": 2, "2": 1}
Badges show: [2] and [1] respectively
```

---

## Troubleshooting

**Problem**: Products show as text, not cards
- **Solution**: Check `database_setup.sql` imported correctly
- Verify `products` table has image column

**Problem**: Images not loading
- **Solution**: Verify image files exist in `/images/` folder
- Check image paths match database entries
- Browser console should show 404 if file missing

**Problem**: Click not incrementing quantity
- **Solution**: Check browser console for JS errors
- Verify `handleProductCardClick` function attached to cards
- Check `data-product-id` attribute on card element

**Problem**: Database connection fails
- **Solution**: Verify `koneksi.php` has correct credentials
- Check MySQL server is running
- Verify database `buyers_are_kings` exists

---

## Code Comments Reference

### PHP (chat.php)
- `generateProductCard()` - Creates HTML for single product
- `$category` - Maps user keywords to product categories
- `data-product-id` - Unique product identifier for JS

### JavaScript (chat.js)
- `const cart = {}` - Cart state management
- `handleProductCardClick()` - Quantity increment logic
- `cart[productId]++` - How quantity increases
- `data-qty` attribute - Tracks displayed quantity

### CSS (style.css)
- `.product-card` - Main card container
- `.product-quantity-badge` - Red quantity indicator
- `@keyframes badgePulse` - Animation on quantity update
- `.product-card:hover` - Interaction feedback

---

## Summary

This enhanced version transforms the chatbot from a simple text-based system into an interactive food ordering app:

‚ú® **What Changed:**
- Products now display as clickable cards with images
- Each card shows seller name, price, and product image
- Quantity tracking works on clicks
- Visual badges show cart contents
- Smooth animations provide feedback

üéØ **Result:**
- More engaging user experience
- Shopee/food app-like interface
- Simple code (no frameworks)
- Easy to understand and modify
- Maintains original chat concept

üöÄ **Ready to Use:**
1. Import database schema
2. Add product images to `/images/` folder
3. Upload files to web server
4. Open in browser and test

Enjoy your buyer-friendly chatbot! üëë
